<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi·ªè h√†ng - Mom Physic</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body {
            background-color: #0b021c;
            color: #fff;
            font-family: "Poppins", sans-serif;
        }

        .navbar, footer {
            background-color: #150035;
        }

        .text-gold {
            color: #e5c100 !important;
        }

        .btn-gold {
            background-color: #e5c100;
            color: #150035;
            border: none;
            transition: 0.3s;
        }

        .btn-gold:hover {
            background-color: #c9aa00;
            color: #fff;
            box-shadow: 0 0 10px rgba(229, 193, 0, 0.5);
        }

        .table {
            background-color: #1a0a33 !important;
            color: #e5c100 !important;
            border-radius: 8px;
            border: 1px solid rgba(229, 193, 0, 0.3);
        }

        .table thead {
            background-color: #291155 !important;
            color: #e5c100 !important;
        }

        .table td, .table th {
            border-color: #3d1a78 !important;
            vertical-align: middle;
        }

        .btn-danger {
            background-color: #9a0036;
            border: none;
            transition: 0.3s;
        }

        .btn-danger:hover {
            background-color: #b90b4d;
        }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark py-3" style="background: linear-gradient(90deg, #150035, #2d007a); border-bottom: 1px solid #e6c300;">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center gap-2" href="/">
            <img src="https://cdn-icons-png.flaticon.com/512/1040/1040230.png" alt="logo" width="40">
            <span class="fw-bold text-gold fs-4 mb-0">Mom Physic</span>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav align-items-lg-center mb-2 mb-lg-0">
                <li class="nav-item mx-2">
                    <a class="nav-link text-gold" href="/products">
                        <i class="bi bi-box-seam fs-5"></i>
                    </a>
                </li>

                <!-- N·∫øu ch∆∞a ƒëƒÉng nh·∫≠p -->
                <th:block th:if="${session.account == null}">
                    <li class="nav-item mx-2">
                        <a class="nav-link text-gold" href="/login">
                            <i class="bi bi-box-arrow-in-right fs-5"></i>
                        </a>
                    </li>
                </th:block>

                <!-- N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p -->
                <th:block th:if="${session.account != null}">
                    <li class="nav-item mx-2">
                        <a class="nav-link text-gold" href="/cart">
                            <i class="bi bi-cart3 fs-5"></i>
                        </a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link text-gold" href="/wishlist">
                            <i class="bi bi-heart fs-5"></i>
                        </a>
                    </li>
                </th:block>
            </ul>
        </div>
    </div>
</nav>

<!-- Gi·ªè h√†ng -->
<section class="py-5">
    <div class="container">
        <h3 class="fw-bold text-gold mb-4">üõí Gi·ªè h√†ng c·ªßa b·∫°n</h3>

        <div class="table-responsive rounded-3 shadow">
            <table class="table text-center align-middle">
                <thead>
                    <tr>
                        <th>S·∫£n ph·∫©m</th>
                        <th>Gi√°</th>
                        <th>S·ªë l∆∞·ª£ng</th>
                        <th>T·ªïng</th>
                        <th>H√†nh ƒë·ªông</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="item : ${cartDetails}">
                        <td class="text-light">
                            <div class="d-flex align-items-center justify-content-center gap-3">
                                <img th:src="@{${item.product.image}}" alt="product" width="70" height="70" class="rounded-3 border border-secondary">
                                <span th:text="${item.product.name}">T√™n s·∫£n ph·∫©m</span>
                            </div>
                        </td>
                        <td th:text="${#numbers.formatDecimal(item.price, 0, 'COMMA', 0, 'POINT')} + '‚Ç´'"></td>
                        <td th:text="${item.quantity}"></td>
                        <td th:text="${#numbers.formatDecimal(item.price * item.quantity, 0, 'COMMA', 0, 'POINT')} + '‚Ç´'"></td>
                        <td>
                            <a th:href="@{'/cart/delete/' + ${item.id}}" class="btn btn-sm btn-danger">
                                <i class="bi bi-trash"></i> X√≥a
                            </a>
                        </td>
                    </tr>

                    <tr th:if="${#lists.isEmpty(cartDetails)}">
                        <td colspan="5" class="text-center text-light py-4">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="text-end mt-4" th:if="${!#lists.isEmpty(cartDetails)}">
            <h5 class="text-gold fw-bold mb-3">
                T·ªïng c·ªông:
                <span th:text="${#numbers.formatDecimal(total, 0, 'COMMA', 0, 'POINT')} + '‚Ç´'">0‚Ç´</span>
            </h5>
            <a th:href="@{/checkout}" class="btn btn-gold btn-lg rounded-pill px-4">
                <i class="bi bi-credit-card"></i> Thanh to√°n
            </a>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="text-center py-4 mt-5">
    <div class="container">
        <p class="mb-0">¬© 2025 <span class="fw-bold text-gold">Mom Physic</span> ‚Äî All Rights Reserved.</p>
    </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
